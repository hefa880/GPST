
#if 0
#include "boot_config.h"

#include "em_device.h"
#include "em_cmu.h"
#include "em_emu.h"
#include "em_gpio.h"
#endif
#include "includes.h"
void WriteChars(char*datas,u8 len,u8 PageAddr,u8 LineAddr);
const u8 dis0to9of8X8little[10][5]=
{
    {0x00,0x3E,0x41,0x41,0x3E}, /*0 5X7*/
    {0x00,0x42,0x7F,0x40,0x00}, /*1*/
    {0x62,0x51,0x49,0x46,0x00}, /*2*/
    {0x00,0x22,0x49,0x49,0x36}, /*3*/
    {0x00,0x38,0x26,0x7F,0x20}, /*4*/
    {0x00,0x4F,0x49,0x49,0x31}, /*5*/
    {0x00,0x3E,0x49,0x49,0x32}, /*6*/
    {0x00,0x03,0x71,0x09,0x07}, /*7*/
    {0x00,0x36,0x49,0x49,0x36}, /*8*/
    {0x00,0x26,0x49,0x49,0x3E}  /*9*/
};

const u8 dis0to9_30X48[10][180]=
{   /* 0 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
     0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
     0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
     0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 1 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 2 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x07,0x07,0x07,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,
     0x80,0x80,0x80,0x80,0x80,0x80,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x81,0x81,0x81,0x81,0x81,0x81,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
     0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F},
    /* 3 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
     0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 4 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
     0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
     0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 5 */
    {0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,
     0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,
     0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,
     0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,0x00,0x00,0x00,
     0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 6 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0x80,0x80,0x80,0x80,0x80,0x80,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
     0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 7 */
    {0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
     0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x81,0x81,0x81,0x81,0x81,0x81,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 8 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
     0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,
     0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
     0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7F,0x7F,0x7F,0x7F,0x7F,0x7F,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 9 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
     0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
     0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
     0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
     0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x01,0x01,0x01,0x01,0x01,0x01,
     0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
};



const u8 soscoin_f[SOS_COIN_LEN]=
{
  0x00,0x00,0x80,0x40,0x20,0x10,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
  0xFE,0x01,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x3F,0x3F,0x3F,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x3F,0x3F,0x3F,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x3F,0x3F,0x3F,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0xFC,0xFC,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0xFC,0xFC,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0x03,0x03,0x03,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0x03,0x03,0x03,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFC,0xFC,0xFC,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFC,0xFC,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFC,0xFC,0xFC,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFC,0xFC,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFC,0xFC,0xFC,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFC,0xFC,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x80,0x40,0x20,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x3F,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x9F,0x5F,0x3F,0x1F,
  0x07,0x06,0x05,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x01,0x03,0x07,0x0F,0x1F,0xBF,0x7F,0x04,0x04,0x04,0x04,0x02,0x01,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x04,0x08,0x04,0x02,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"E:\Projects\mcu\Tools\sos_f.bmp",0*/
};
const u8 soscoin_r[SOS_COIN_LEN]=
{
  0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0xEF,0xDF,0xBF,0x7F,0xFF,0xFF,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFE,0x01,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0xFC,0xFC,0xFC,0xFC,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0xFC,0xFC,0xFC,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
  0xE0,0xC0,0xA0,0x60,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xDF,0xBF,0x7F,0xFF,0xFF,0x00,
  0xFF,0xFF,0xFF,0xFF,0xFE,0xFD,0xFB,0xFB,0xFB,0xFB,0x80,0x40,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0xFF,0x7F,0xBF,0xDF,0xEF,0xF7,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFB,0xFA,0xF9,0xF8,
  0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0xFD,0xFB,0xF7,0xFB,0xFD,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,/*"E:\Projects\mcu\Tools\sos_r.bmp",0*/
};

const u8 blecoin[BLE_COIN_LEN]=
{
    0x00,0x00,0x00,0x00,0x00,0x10,0x20,0x40,0xFC,0x88,0x50,0x20,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x04,0x02,0x01,0x1F,0x08,0x05,0x02,0x00,0x00,0x00,0x00
};

const u8 gpscoin[GPS_COIN_LEN]=
{
    0x00,0x00,0x00,0x80,0x80,0xC0,0xA0,0x90,0xFC,0x90,0xA0,0xC0,0x80,0x80,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x04,0x1F,0x04,0x02,0x01,0x00,0x00,0x00,0x00
};

const u8 batcoin[BAT_COIN_LEN]=
{
    0x00,0x00,0x00,0xC0,0xE0,0x20,0xE0,0x20,0xE0,0x20,0xE0,0x20,0xE0,0x00,0x00,0x00,
    0x00,0x00,0x00,0x03,0x07,0x04,0x07,0x04,0x07,0x04,0x07,0x04,0x07,0x00,0x00,0x00
};

#ifndef AA_TO_ZZ
const u8 poweronoff[90]=
{

    0x00,0xFF,0x09,0x19,0x29,0x46,0x80,0x00,0x78,0x94,0x94,0x94,0x58,0x00,0x10,0x10,0xFC,0x12,0x12,0x10,0x00,0xFD,0x00,0x00,0xFC,0x04,0x04,0xF8,0x00,0x78,0x94,0x94,
    0x94,0x58,0x00,0x70,0x88,0x88,0x88,0xFE,0x00,0x00,0x00,0x01,0x01,0xFF,0x01,0x01,0x78,0x94,0x94,0x94,0x58,0x00,0x70,0x88,0x88,0x88,0x50,0x00,0xFE,0x10,0x10,0x10,
    0xE0,0x00,0x38,0xC0,0x20,0x18,0x20,0xC0,0x38,0x00,0x78,0x94,0x94,0x94,0x58,0x00,0x70,0x94,0x94,0xF8,0x80,0x00,0xFC,0x08,0x04,0x04

};
#else
u8 azAZ[53][14]=
{

    {0x00,0x20,0xA0,0xA0,0xA0,0xC0,0x00,0x00,0x01,0x02,0x02,0x02,0x03,0x00},/*"a",0*/

    {0x00,0xFC,0x20,0x20,0x20,0xC0,0x00,0x00,0x03,0x02,0x02,0x02,0x01,0x00},/*"b",1*/

    {0x00,0xC0,0x20,0x20,0x20,0x40,0x00,0x00,0x01,0x02,0x02,0x02,0x01,0x00},/*"c",2*/

    {0x00,0xC0,0x20,0x20,0x40,0xFC,0x00,0x00,0x01,0x02,0x02,0x02,0x03,0x00},/*"d",3*/

    {0x00,0xC0,0xA0,0xA0,0xA0,0xC0,0x00,0x00,0x01,0x02,0x02,0x02,0x02,0x00},/*"e",4*/

    {0x00,0x20,0x20,0xF8,0x24,0x24,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00},/*"f",5*/

    {0x00,0xC0,0xA0,0xA0,0xE0,0x20,0x00,0x00,0x07,0x0A,0x0A,0x0A,0x04,0x00},/*"g",6*/

    {0x00,0xFC,0x40,0x20,0x20,0xC0,0x00,0x00,0x03,0x00,0x00,0x00,0x03,0x00},/*"h",7*/

    {0x00,0x00,0x00,0xE4,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00},/*"i",8*/

    {0x00,0x00,0x00,0x00,0xE4,0x00,0x00,0x00,0x00,0x08,0x08,0x07,0x00,0x00},/*"j",9*/

    {0x00,0xFC,0x80,0xC0,0x20,0x00,0x00,0x00,0x03,0x00,0x00,0x03,0x02,0x00},/*"k",10*/

    {0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00},/*"l",11*/

    {0x00,0xE0,0x20,0xE0,0x20,0xC0,0x00,0x00,0x03,0x00,0x03,0x00,0x03,0x00},/*"m",12*/

    {0x00,0xE0,0x20,0x20,0x20,0xC0,0x00,0x00,0x03,0x00,0x00,0x00,0x03,0x00},/*"n",13*/

    {0x00,0xC0,0x20,0x20,0x20,0xC0,0x00,0x00,0x01,0x02,0x02,0x02,0x01,0x00},/*"o",14*/

    {0x00,0xE0,0x40,0x20,0x20,0xC0,0x00,0x00,0x0F,0x02,0x02,0x02,0x01,0x00},/*"p",15*/

    {0x00,0xC0,0x20,0x20,0x20,0xE0,0x00,0x00,0x01,0x02,0x02,0x02,0x0F,0x00},/*"q",16*/

    {0x00,0x00,0xE0,0x40,0x20,0x20,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00},/*"r",17*/

    {0x00,0x40,0xA0,0xA0,0xA0,0x20,0x00,0x00,0x02,0x02,0x02,0x02,0x03,0x00},/*"s",18*/

    {0x00,0x20,0xF8,0x20,0x20,0x20,0x00,0x00,0x00,0x01,0x02,0x02,0x02,0x00},/*"t",19*/

    {0x00,0xE0,0x00,0x00,0x00,0xE0,0x00,0x00,0x01,0x02,0x02,0x02,0x01,0x00},//u
    {0x00,0x60,0x80,0x00,0x80,0x60,0x00,0x00,0x00,0x01,0x02,0x01,0x00,0x00},//v
    {0x00,0xE0,0x00,0xE0,0x00,0xE0,0x00,0x00,0x00,0x03,0x00,0x03,0x00,0x00},//w
    {0x00,0x60,0x80,0x00,0x80,0x60,0x00,0x00,0x06,0x03,0x01,0x03,0x06,0x00},//x
    {0x20,0xC0,0x00,0x00,0xC0,0x20,0x00,0x00,0x08,0x0D,0x07,0x00,0x00,0x00},//y
    {0x00,0x20,0x20,0xA0,0x60,0x20,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0x00},//z


    {0x00,0xC0,0xB8,0x8C,0xB8,0xC0,0x00,0x02,0x01,0x00,0x00,0x00,0x01,0x02},/*"A",26*/

    {0xFC,0x24,0x24,0x24,0x24,0xD8,0x00,0x03,0x02,0x02,0x02,0x02,0x01,0x00},/*"B",27*/

    {0xF0,0x08,0x04,0x04,0x04,0x98,0x00,0x01,0x03,0x02,0x02,0x02,0x01,0x00},/*"C",28*/

    {0xFC,0x04,0x04,0x04,0x08,0xF0,0x00,0x03,0x02,0x02,0x02,0x01,0x00,0x00},/*"D",29*/

    {0xFC,0x24,0x24,0x24,0x24,0x04,0x00,0x03,0x02,0x02,0x02,0x02,0x02,0x00},/*"E",30*/

    {0xFC,0x24,0x24,0x24,0x24,0x04,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00},/*"F",31*/

    {0xF0,0x0C,0x04,0x44,0x44,0xD8,0x00,0x01,0x03,0x02,0x02,0x02,0x03,0x00},/*"G",32*/

    {0xFC,0x20,0x20,0x20,0x20,0xFC,0x00,0x03,0x00,0x00,0x00,0x00,0x03,0x00},/*"H",33*/

    {0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00},/*"I",34*/

    {0x00,0x80,0x00,0x00,0x00,0xFC,0x00,0x00,0x01,0x02,0x02,0x02,0x01,0x00},/*"J",35*/

    {0xFC,0x20,0x30,0xD8,0x08,0x04,0x00,0x03,0x00,0x00,0x00,0x01,0x02,0x00},/*"K",36*/

    {0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x02,0x02,0x02,0x02,0x02,0x00},/*"L",37*/

    {0x00,0xFC,0x70,0xC0,0x70,0xFC,0x00,0x00,0x03,0x00,0x03,0x00,0x03,0x00},/*"M",38*/

    {0x00,0xFC,0x18,0x60,0x80,0xFC,0x00,0x00,0x03,0x00,0x00,0x01,0x03,0x00},/*"N",39*/

    {0xF0,0x08,0x04,0x04,0x08,0xF0,0x00,0x00,0x01,0x02,0x02,0x01,0x00,0x00},/*"O",40*/

    {0xFC,0x44,0x44,0x44,0x44,0x38,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00},/*"P",41*/

    {0xF0,0x08,0x04,0x84,0x08,0xF0,0x00,0x00,0x01,0x02,0x02,0x03,0x01,0x00},/*"Q",42*/

    {0xFC,0x44,0x44,0xC4,0x44,0x38,0x00,0x03,0x00,0x00,0x00,0x03,0x02,0x00},/*"R",43*/

    {0x98,0x24,0x24,0x24,0x44,0x88,0x00,0x01,0x03,0x02,0x02,0x02,0x01,0x00},/*"S",44*/

    {0x00,0x04,0x04,0xFC,0x04,0x04,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00},/*"T",45*/

    {0xFC,0x00,0x00,0x00,0x00,0xFC,0x00,0x01,0x02,0x02,0x02,0x02,0x01,0x00},//U
    {0x00,0x3C,0xC0,0x00,0xC0,0x3C,0x00,0x00,0x00,0x01,0x03,0x01,0x00,0x00},//V
    {0x3C,0xC0,0xF0,0x3C,0xF0,0xC0,0x3C,0x00,0x03,0x00,0x00,0x00,0x03,0x00},//W
    {0x00,0x04,0x88,0x70,0x88,0x04,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00},//X
    {0x04,0x0C,0x30,0xE0,0x30,0x0C,0x04,0x00,0x00,0x00,0x03,0x00,0x00,0x00},//Y
    {0x00,0x84,0x44,0x24,0x14,0x0C,0x00,0x00,0x03,0x02,0x02,0x02,0x02,0x00},//Z

    {0x00,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"-",52*/


};
#endif

u8 aWeather[7][128] = {
    /* no signal */
    /*
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFF,0xFF,0xFF,0xFF,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF3,0xF3,0xF3,0xF3,0xF3,0xF3,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    */
    /* clear 1 & 2 */
    {0x00,0x00,0x00,0x00,0x00,0x30,0x30,0xC0,0xC0,0x00,0x00,0x00,0x00,0xC0,0xC0,0xCF,0xCF,0xC0,0xC0,0x00,0x00,0x00,0x00,0xC0,0xC0,0x30,0x30,0x00,0x00,0x00,0x00,0x00,
     0x00,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0xF0,0xF0,0x0F,0x0F,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x0F,0x0F,0xF0,0xF0,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC3,0xC3,0x3C,0x3C,0x30,0x30,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x30,0x30,0x3C,0x3C,0xC3,0xC3,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00},
    /* cloudy 3 & 4 */
    {0x00,0x00,0x00,0x00,0x00,0x30,0x30,0xC0,0xC0,0x00,0x00,0x00,0x00,0xC0,0xC0,0xCF,0xCF,0xC0,0xC0,0x00,0x00,0x00,0x00,0xC0,0xC0,0x30,0x30,0x00,0x00,0x00,0x00,0x00,
     0x00,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0xF0,0xF0,0x0F,0x0F,0x03,0x03,0xC0,0xC0,0x30,0x30,0x30,0x30,0x33,0x33,0xCF,0xCF,0xF0,0xF0,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x00,
     0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x33,0x33,0x0C,0x0C,0x0F,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x0F,0x0C,0x0C,0x30,0x30,0xC0,0xC0,0x00,
     0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x00},
    /* rain 9 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xF0,0xF0,0x0C,0x0C,0x03,0x03,0x03,0x03,0x03,0x03,0x0C,0x0C,0xF0,0xF0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x3C,0x3C,0xC3,0xC3,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0xC3,0xC3,0x3C,0x3C,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x33,0x33,0xC3,0xC3,0x33,0x33,0xC3,0xC3,0x33,0x33,0xC3,0xC3,0x33,0x33,0xC3,0xC3,0x33,0x33,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x03,0x03,0x00,0x00,0x03,0x03,0x00,0x00,0x03,0x03,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* light rain 10 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xF0,0xF0,0x0C,0x0C,0x03,0x03,0x03,0x03,0x03,0x03,0x0C,0x0C,0xF0,0xF0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x3C,0x3C,0xC3,0xC3,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0xC3,0xC3,0x3C,0x3C,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x33,0x03,0x03,0x03,0x03,0x33,0x33,0x03,0x03,0x03,0x03,0x33,0x33,0x03,0x03,0x03,0x03,0x30,0x30,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* storm 11 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xFC,0x1F,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0xC3,0xC3,0x33,0x33,0x0F,0x0F,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0xC0,0xF8,0xFF,0x87,0x80,0x80,0x80,0x80,0x80,0x80,0x8C,0x8C,0x8F,0x0F,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0xCC,0xCC,0x3C,0x3C,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xF1,0xF1,0xCE,0xCE,0x30,0x30,0x0C,0x0C,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x0F,0x0F,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* blowing_snow 13 */
    {0x00,0x00,0x00,0xC0,0xC0,0x30,0x30,0xFC,0xFC,0x30,0x30,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0xCC,0xCC,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x03,0x03,0x0F,0x0F,0x33,0x33,0xFF,0xFF,0x33,0x33,0x0F,0x0F,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0xFC,0xFC,0x33,0x33,0xFF,0xFF,0x33,0x33,0xFC,0xFC,0x30,0x30,0x00,
     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x0C,0x0C,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x0F,0x0F,0x03,0x03,0x00,0x00,0x00,0x00,0x00},
    /* foggy 50 */
    {0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,
     0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,
     0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,
     0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C,0x30,0x30,0x30,0x30,0x0C,0x0C,0x03,0x03,0x03,0x03,0x0C,0x0C},

};

void Delay_Ms(u16 delayms)
{
    u16 i,j;
    for(j=0; j<delayms; j++)
    {
        i=4000;
        while(i--)
            asm("nop");
    }
}


void nops(u8 t)
{
    u8 i;
    t/=10;
    i=t;
    while(i-->1)
    {

        asm("nop");
    }

}



/**********************************************
//
// 向SPI写数据函数
// 返回值为接收到的数据
//
**********************************************/
u8 Write_Spi_Data( u8 Data )
{
    u8  ret = 0;

    SPI_CSB_VALID();
    ret = USART_SpiTransfer( USART1, Data );
    SPI_CSB_INVALID();

    return ret;
}

/**********************************************
//
// 写命令函数
//
**********************************************/
void Write_Command( u8 command )
{
    SPI_COMMAND_SEND();
    Write_Spi_Data( command );
}

/**********************************************
//
// 写数据函数
//
**********************************************/
void Write_Data( u8 data )
{
    SPI_DATA_SEND();
    Write_Spi_Data( data );
}

/******************************************************
//
// 复位LCD函数
//
******************************************************/
void ResetLcd( void )
{
    LCD_POWER_ON();
    LCD_BL_ON();

    Delay_Ms( 200 );
    LCD_RST_HIGH();
    Delay_Ms( 200 );
    LCD_RST_LOW();  /* Reset LCD */
    Delay_Ms( 50 );
    LCD_RST_HIGH();
    Delay_Ms( 500 );
}

/******************************************************
//
// 初始化ST7571芯片，LCD驱动芯片
//
******************************************************/
void InitST7571(void)
{
    ResetLcd();

    Write_Command( 0xAE );  // Display Off

    Write_Command( 0xA0 );  // Set SEG Scan Direction
    Write_Command( 0xC0 );  // Set COM Scan Direction

    Write_Command( 0x44 );  // Set COM0
    Write_Command( 0x00 );
    Write_Command( 0x40 );  // Set Display Start Line
    Write_Command( 0x00 );

    Write_Command( 0x38 );  // Set Mode
    Write_Command( 0x48 );

    Write_Command( 0xAB );  // Oscillator ON

    Write_Command( 0x26 );  // Select Regulator Register
    Write_Command( 0x81 );  // Set Contrast
    Write_Command( 0x30 );

    Write_Command( 0x53 );  // Select LCD bias

    Write_Command( 0x48 );  // Set Display Duty
    Write_Command( 0x80 );

    Write_Command( 0x2C );  // Power Control
    Delay_Ms( 50 );
    Write_Command( 0x2E );  // Power Control
    Delay_Ms( 50 );
    Write_Command( 0x2F );  // Power Control
    Delay_Ms( 50 );
    Write_Command( 0xAF );  // Display On
}

void InitSpiModule( void )
{
    GPIO_PinModeSet( SPI_SCLK_PORT, SPI_SCLK_PIN, gpioModePushPull, 1 );
    GPIO_PinModeSet( SPI_SID_PORT,  SPI_SID_PIN,  gpioModePushPull, 1 );
    GPIO_PinModeSet( SPI_CSB_PORT,  SPI_CSB_PIN,  gpioModePushPull, 1 );  // CS  L Valid
    GPIO_PinModeSet( SPI_A0_PORT,   SPI_A0_PIN,   gpioModePushPull, 1 );  // A0  L Command; H Data

    GPIO_PinModeSet( LCD_POWER_PORT, LCD_POWER_PIN, gpioModePushPull, 1 );  // L Valid
    GPIO_PinModeSet( LCD_RST_PORT,   LCD_RST_PIN,   gpioModePushPull, 1 );  // L Valid
    GPIO_PinModeSet( LCD_BL_PORT,    LCD_BL_PIN,    gpioModePushPull, 0 );  // H Valid

    USART_InitSync_TypeDef SPI_init = USART_INITSYNC_DEFAULT;
    SPI_init.enable    = usartEnableTx;
    SPI_init.baudrate  = 500000;
    SPI_init.databits  = usartDatabits8;
    SPI_init.master    = true;
    SPI_init.clockMode = usartClockMode3;
    USART_InitSync( USART1, &SPI_init );
    USART1->ROUTE = USART_ROUTE_CSPEN | USART_ROUTE_CLKPEN | USART_ROUTE_TXPEN | USART_ROUTE_LOCATION_LOC1;
}


void LcdInit(void)
{
    InitSpiModule();
    InitST7571();
    FillLcd( 0 );
}


void BacklightOnOff( u8 on )
{
    if ( on )
    {
        Write_Command( 0xaf );
        LCD_BL_ON();
    }
    else
    {
        Write_Command( 0xae );
        LCD_BL_OFF();
    }
}

// 0---127
void SetColumnAddress( u8 ColumnAddr )
{
    Write_Command( ColumnAddr & 0x0F );
    Write_Command( 0x10 | ( ( ColumnAddr >> 4 ) & 0x07 ) );
}

// 0---15
void SetPageAddress( u8 PageAddr )
{
    PageAddr = PageAddr & 0xF;
    Write_Command( 0xB0 + PageAddr );
}

// PageAddr:0--15  LineAddr:0--127
void SetLineAndPageAddress( u8 PageAddr, u8 LineAddr )
{
    SetPageAddress( PageAddr );
    SetColumnAddress( LineAddr );
}

u8 invert( u8 data )
{
    u8 i, byTmp = 0;

    for ( i=0; i<8; i++ )
    {
        byTmp |= ( ( data>>i ) & 0x1 ) << ( 7 -i );
    }

    return byTmp;
}

//
void WriteBuffer( u8 *data, u16 len, u8 enable )
{
    u16 i;
    u8  *p = data;

    if ( p == NULL )
    {
        return;
    }

    for ( i=0; i<len; i++ )
    {
        if ( enable )
        {
            Write_Data( invert( p[i]) );
            #ifdef LCD_FOUR_GRAY
                Write_Data( invert( p[i] ) );
            #endif
        }
        else
        {
            Write_Data( 0 );
            #ifdef LCD_FOUR_GRAY
                Write_Data( 0 );
            #endif
        }
    }
}


void DisplayWeather( u8 index )
{
    u32 i = 0, icon;

    if ((index > 0) && (index <= 4))
    {
        icon = ( ( index - 1 ) >> 1 );
    }
    else if ((index >= 9) && (index < 12))
    {
        icon = index - 7;
    }
    else if (index == 13)
    {
        icon = index - 8;
    }
    else if (index == 50)
    {
        icon = 6;
    }
    else
    {
        icon = 0;
    }

    for (i = 0; i < 4; i ++)
    {
        SetLineAndPageAddress(11-i, 10);
        WriteBuffer((u8 *)&aWeather[icon][32*i], 32, 1);
    }
}

void DisplayTemperature( u8 sign, u8 temperature )
{
    const u8 sign_5x16[10] = {0x80,0x80,0x80,0x80,0x80,  0x01,0x01,0x01,0x01,0x01};
    const u8 degree_8x16[16] = {0x87,0x85,0x67,0x60,0x60,0x60,0x60,0x60,
                                0x1F,0x1F,0x60,0x60,0x60,0x60,0x60,0x60};
    const u8 temp_10x16[10][20] = {
        {0xF8,0xF8,0x06,0x06,0x06,0x06,0x06,0x06,0xF8,0xF8,
         0x1F,0x1F,0x60,0x60,0x60,0x60,0x60,0x60,0x1F,0x1F},

        {0x00,0x00,0x06,0x06,0xFE,0xFE,0x00,0x00,0x00,0x00,
         0x00,0x00,0x60,0x60,0x7F,0x7F,0x60,0x60,0x00,0x00},

        {0x18,0x18,0x06,0x06,0x06,0x06,0x86,0x86,0x78,0x78,
         0x60,0x60,0x78,0x78,0x66,0x66,0x61,0x61,0x60,0x60},

        {0x18,0x18,0x06,0x06,0x86,0x86,0x86,0x86,0x78,0x78,
         0x18,0x18,0x60,0x60,0x61,0x61,0x61,0x61,0x1E,0x1E},

        {0x80,0x80,0x60,0x60,0x18,0x18,0xFE,0xFE,0x00,0x00,
         0x1F,0x1F,0x18,0x18,0x18,0x18,0x7F,0x7F,0x18,0x18},

        {0x00,0xFE,0xFE,0x86,0x86,0x86,0x86,0x06,0x06,0x00,
         0x00,0x61,0x61,0x61,0x61,0x61,0x61,0x1E,0x1E,0x00},

        {0xE0,0xE0,0x98,0x98,0x86,0x86,0x86,0x86,0x00,0x00,
         0x1F,0x1F,0x61,0x61,0x61,0x61,0x61,0x61,0x1E,0x1E},

        {0x06,0x06,0x06,0x06,0x86,0x86,0x66,0x66,0x1E,0x1E,
         0x00,0x00,0x78,0x78,0x07,0x07,0x00,0x00,0x00,0x00},

        {0x78,0x78,0x86,0x86,0x86,0x86,0x86,0x86,0x78,0x78,
         0x1E,0x1E,0x61,0x61,0x61,0x61,0x61,0x61,0x1E,0x1E},

        {0x78,0x78,0x86,0x86,0x86,0x86,0x86,0x86,0xF8,0xF8,
         0x00,0x00,0x61,0x61,0x61,0x61,0x19,0x19,0x07,0x07},
    };
    u8 i = 0;

    temperature = temperature % 100;
    for ( i = 0; i < 2; i ++ )
    {
        SetLineAndPageAddress(7 - i, 4);
        if ( ( sign ) && ( temperature != 0 ) )
        {
            WriteBuffer((u8*)&sign_5x16[5*i], 5, true);
        }
        else
        {
            WriteBuffer((u8*)&sign_5x16[5*i], 5, 0);
        }

        SetLineAndPageAddress(7 - i, 11);
        WriteBuffer((u8*)&temp_10x16[temperature/10][10*i], 10, true);

        SetLineAndPageAddress(7 - i, 23);
        WriteBuffer((u8*)&temp_10x16[temperature%10][10*i], 10, true);

        SetLineAndPageAddress(7 - i, 36);
        WriteBuffer((u8*)&degree_8x16[8*i], 8, true);
    }
}

void DisplayDate( u8 month, u8 day )
{
    const u8 slash_6x16[12] = {0x00,0x00,0x00,0x00,0x00,0x80,  0x10,0x08,0x04,0x02,0x01,0x00};
    const u8 date_6x16[10][12] = {
        {0xE0,0x10,0x10,0x10,0x10,0xE0,    0x0F,0x10,0x10,0x10,0x10,0x0F},
        {0x00,0x10,0x10,0xF0,0x00,0x00,    0x00,0x10,0x10,0x1F,0x10,0x00},
        {0x20,0x10,0x10,0x10,0x10,0xE0,    0x10,0x18,0x14,0x12,0x11,0x10},
        {0x20,0x10,0x10,0x10,0x10,0xE0,    0x08,0x10,0x11,0x11,0x11,0x0E},
        {0x00,0x80,0x40,0x20,0xF0,0x00,    0x07,0x04,0x04,0x04,0x1F,0x04},
        {0xF0,0x10,0x10,0x10,0x10,0x10,    0x09,0x11,0x11,0x11,0x11,0x0E},
        {0xC0,0x20,0x10,0x10,0x10,0x00,    0x0F,0x11,0x11,0x11,0x11,0x0E},
        {0x10,0x10,0x10,0x10,0xD0,0x30,    0x00,0x00,0x1C,0x03,0x00,0x00},
        {0xE0,0x10,0x10,0x10,0x10,0xE0,    0x0E,0x11,0x11,0x11,0x11,0x0E},
        {0xE0,0x10,0x10,0x10,0x10,0xE0,    0x00,0x11,0x11,0x11,0x09,0x07},
    };
    u8 i = 0;

    for ( i = 0; i < 2; i ++ )
    {
        /* 天的高位 */
        SetLineAndPageAddress(4 - i, 7);
        WriteBuffer((u8*)&date_6x16[day/10][6*i], 6, true);
        /* 天的低位 */
        SetLineAndPageAddress(4 - i, 15);
        WriteBuffer((u8*)&date_6x16[day%10][6*i], 6, true);

        SetLineAndPageAddress(4 - i, 23);
        WriteBuffer((u8*)&slash_6x16[6*i], 6, true);

        /* 月的高位 */
        SetLineAndPageAddress(4 - i, 31);
        WriteBuffer((u8*)&date_6x16[month/10][6*i], 6, true);
        /* 月的低位 */
        SetLineAndPageAddress(4 - i, 39);
        WriteBuffer((u8*)&date_6x16[month%10][6*i], 6, true);
    }
}

void DisplayWeek( u8 index )
{
    const u8 week[7][21] = {
        {0x00,0x4C,0x92,0x92,0x92,0x64,0x00,0x00,0x7E,0x80,0x80,0x80,0x7E,0x00,0x00,0xFE,0x0C,0x10,0x60,0xFE,0x00},/* SUN */
        {0xFE,0x04,0x08,0x10,0x08,0x04,0xFE,0x00,0x00,0x7C,0x82,0x82,0x82,0x7C,0x00,0x00,0xFE,0x0C,0x10,0x60,0xFE},/* MON */
        {0x00,0x00,0x02,0x02,0xFE,0x02,0x02,0x00,0x00,0x7E,0x80,0x80,0x80,0x7E,0x00,0x00,0xFE,0x92,0x92,0x82,0x00},/* TUE */
        {0x00,0xFE,0x40,0x20,0x10,0x20,0x40,0xFE,0x00,0x00,0xFE,0x92,0x92,0x82,0x00,0x00,0xFE,0x82,0x82,0x82,0x7C},/* WED */
        {0x00,0x02,0x02,0xFE,0x02,0x02,0x00,0x00,0xFE,0x10,0x10,0x10,0xFE,0x00,0x00,0x7E,0x80,0x80,0x80,0x7E,0x00},/* THU */
        {0x00,0x00,0x00,0x00,0xFE,0x12,0x12,0x02,0x00,0x00,0xFE,0x12,0x12,0x12,0xEC,0x00,0x00,0xFE,0x00,0x00,0x00},/* FRI */
        {0x00,0x4C,0x92,0x92,0x92,0x64,0x00,0x00,0xF8,0x24,0x22,0x24,0xF8,0x00,0x00,0x02,0x02,0xFE,0x02,0x02,0x00} /* SAT */ };

    SetLineAndPageAddress(2, 15);
    WriteBuffer((u8 *)&week[index], 21, 1);
}

void LCDWriteGsm(u8 qss, u8 csq)
{
    /*Ygsm天线的标志*/
    const u8 ant[20] = {0x00,0x08,0x18,0x28,0x48,0xF8,0x48,0x28,0x18,0x08,
                        0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00};
    const u8 CSQ[32] = {0x00,0xA8,0xA8,0xA8,0xA8,0xA8,0x28,0x28,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,
                        0x00,0x0A,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
    const u8 mask_x[6][2] = {{0xA8, 0x0A}, {0xA8, 0x02}, {0xA8, 0x00}, {0x28, 0x00}, {0x08, 0x00}, {0x00, 0x00}};
    u8 buffer[16];
    static u8 csqb=0xaf;
    u8 i, j, mask[2];

    if ( qss )
    {
        for (i=0; i<2; i++)
        {
            SetLineAndPageAddress(14 - i, 3);
            WriteBuffer((u8 *)&ant[10*i], 10, 1);
        }
    }

    if(csq!=csqb)
    {
        /* csq最强值为20db，分为5段 */
        i = csq >> 2;
        i = i > 5 ? 5 : i;
        mask[0] = ~mask_x[i][0];
        mask[1] = ~mask_x[i][1];

        for (i=0; i<2; i++)
        {
            for ( j = 0; j < 16; j ++ )
            {
                buffer[j] = CSQ[16*i+j] & mask[i];
            }
            SetLineAndPageAddress(14 - i, 13);
            WriteBuffer((u8 *)buffer, 16, 1);
        }
        csqb=csq;
    }
}


#ifndef KLX_COIN

const u8 coinEZI[12][24]=
{
    {0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00},
    {0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00},
    {0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00},
    {0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x00},/*"E",0*/

    {0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xF0,0xF8,0xFC,0x7E,0x3F,0x1F,0x07,0x03,0x01,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x80,0xC0,0xE0,0xF0,0xFC,0xFE,0x3F,0x1F,0x0F,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x00,0x00},/*"Z",1*/

    {0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0xF0,0xFC,0xFE,0xFF,0x0F,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x0F,0xFF,0xFF,0xFC,0xF0,0x00,0x00},
    {0x00,0x00,0x1F,0x7F,0xFF,0xFF,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xFF,0xFF,0x7F,0x1F,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x03,0x07,0x07,0x06,0x06,0x06,0x06,0x06,0x07,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00},/*"O",2*/

};
#else
const u8 coinEZI[12][24]=
{
// K(0) L(1) X(2)

    {0x00,0x20,0x20,0x20,0x20,0xE0,0xE0,0xE0,0xE0,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0xA0,0xA0,0x60,0x60},
    {0x60,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x20,0x30,0x10,0x18,0x18,0x3C,0x7C},
    {0x72,0xF2,0xE1,0xC1,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x1F,0x1F,0x1F},
    {0x1F,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x01,0x13,0x13,0x17,0x1F,0x1E,0x1E,0x1C,0x18,0x10,0x10,0x10,0x10,0x00},/*"K",0*/

    {0x00,0x00,0x20,0x20,0x20,0x20,0xE0,0xE0,0xE0,0xE0,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x1F,0x1F},
    {0x1F,0x1F,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x18,0x18,0x18,0x1C,0x0E,0x02,0x00,0x00},/*"L",1*/

    {0x00,0x00,0x00,0x20,0x20,0x20,0x60,0x60,0xE0,0xE0,0xE0,0xA0,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0xA0,0xE0},
    {0xE0,0x60,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x87,0xCE,0x7E,0x3C},
    {0x78,0x78,0xEC,0xE4,0xC6,0x83,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x18,0x18},
    {0x1C,0x16,0x13,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x13,0x17,0x1F,0x1F,0x1E,0x1C,0x18,0x18,0x10,0x10,0x10,0x00},/*"X",2*/
};
#endif
#ifndef KLX_COIN
const u8 coin_i[4][10]=
{


    {0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00},
    {0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00},
    {0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00},
    {0x00,0x00,0x07,0x07,0x07,0x07,0x07,0x07,0x00,0x00},/*"E:\KLX\project\KGGT-003\LCD\PCtoLCD2002\power small big coin1 24 32.BMP II.BMP.BMP",0*/
};
#endif

#ifdef AA_TO_ZZ
void WriteCharaz( char charaz, u8 PageAddr, u8 LineAddr )
{
    u8 position;
    char *p;
    char buf[14]= {0,0,0,0,0,0,0,0,0,0,0,0,0,0};

    if((charaz<='z')&&(charaz>='a'))
        position=charaz-'a';
    else if((charaz<='Z')&&(charaz>='A'))
        position=charaz-'A'+26;
    else if(charaz=='-')
    {
        position=52;
    }
    else
        charaz=' ';

    p = (char*)&azAZ[position][0];
    if ( charaz==' ' )
    {
        p=buf;
    }

    SetLineAndPageAddress( PageAddr, LineAddr );
    WriteBuffer( (u8*)p, 7, 1 );
    SetLineAndPageAddress( PageAddr-1, LineAddr );
    WriteBuffer( (u8*)(p+7), 7, 1 );

}

void WriteChars( char *datas, u8 len, u8 PageAddr, u8 LineAddr )
{
    u8 i, page;

    page = 15 - PageAddr & 0xF;
    for ( i=0; i<len; i++ )
    {
        WriteCharaz( datas[i], page, LineAddr+i*7 );
    }
}
#endif


void LCDWritePowerONOff(void)
{
#ifndef KLX_COIN
#define START_PAGE  5
#define START_LINE 28
    u8* p,*p1,*p2,i,j,len,linelen;


    p=(u8*)&coinEZI[0][0];
    p1=(u8*)&coin_i[0][0];
    len=0;
    for(i=0; i<4; i++)
    {

        linelen=24;
        if(i==2)
        {
            linelen=10;
            p2=p;
            p=p1;
        }
        if(i==3)
        {
            p=p2;
        }

        for(j=0; j<4; j++)
        {
            SetLineAndPageAddress( 15 - (START_PAGE+j), START_LINE+len );
            WriteBuffer( p, linelen, 1 );
            p+=linelen;
        }
        len+=linelen;
    }
#ifndef AA_TO_ZZ
    p=(u8*)poweronoff;
    SetLineAndPageAddress(15-(START_PAGE+4),16);
    WriteBuffer(p,90,1);
#else
    WriteChars("Refined Techwear",16,START_PAGE+4,10);
#endif
#else
#define START_PAGE  2
#define START_LINE 16
    u8* p,i,j,len,linelen;


    p=(u8*)&coinEZI[0][0];
    len=0;
    for(i=0; i<3; i++)
    {

        linelen=32;
        for(j=0; j<3; j++)
        {
            SetLineAndPageAddress( 15 - (START_PAGE+j), START_LINE+len );
            WriteBuffer(p,linelen,1);
            p+=linelen;
        }
        len+=linelen;
    }

#ifndef AA_TO_ZZ
    p=(u8*)poweronoff;
    SetLineAndPageAddress(15-(START_PAGE+3),10);
    WriteBuffer(p,90,1);
#else
    WriteChars("Refined Techwear",16,START_PAGE+3,10);
#endif

#endif
}



void LCDWriteCoin(const u8 *coin, u8 coinlen, u8 position, u8 enable)
{
    u8 i;
    u8* p;
    p=(u8*)coin;
    for (i=0; i<2; i++)
    {
        SetLineAndPageAddress(14-i, position);
        WriteBuffer(p+coinlen*i/2, coinlen/2, enable);
    }

}
void LCDWriteSos( const u8 *coin, u8 enable )
{
    u8 i;
    u8 *p = (u8*)coin;

    for ( i=0; i<8; i++ )
    {
        SetLineAndPageAddress( 11-i, 9 );
        WriteBuffer( p+110*i, 110, enable ); /* 110=SOS_COIN_LEN/8 */
    }
}
/*
*********************************************************************************************************
*	函 数 名void LCDWriteBattery(u8 power)
*	功能说明:
*
*       作    者 ：liupeng
*	形    参：
*       版    本：version 1.0
*	返 回 值: 无
*********************************************************************************************************
*/


void LCDWriteBattery( u8 power )
{
    u8        buffer[32], i;
    static u8 sPower = 10;

    if ( power )
    {
        for ( i = 0; i < 32; i ++ )
        {
            buffer[i] = batcoin[i];
        }
        if ((GsmSta.charging == BATTERY_CHARGE) && (power < 98))
        {
            //GPIO_PinOutClear( GLED_GPIO_PORT, GLED_GPIO_PIN );

            sPower = ( sPower + 20 ) % 100;
            power  = sPower;
        }
        else if ((GsmSta.charging == BATTERY_CHARGE) && (power >= 98))
        {
            //GPIO_PinOutSet( GLED_GPIO_PORT, GLED_GPIO_PIN );
        }

        i = power / 25 + 1;
        if ( power <= 5 )
        {
            i = 0;
        }
        switch ( i )
        {
        case 0 :
            buffer[11] = 0xE0;
            buffer[27] = 0x07;
        case 1 :
            buffer[9]  = 0xE0;
            buffer[25] = 0x07;
        case 2 :
            buffer[7]  = 0xE0;
            buffer[23] = 0x07;
        case 3 :
            buffer[5]  = 0xE0;
            buffer[21] = 0x07;
        case 4 :
        case 5 :
            break;

        default :
            break;
        }
        for ( i = 0; i < 2; i ++ )
        {
            SetLineAndPageAddress( 14 - i , 108 );
            WriteBuffer( (u8*)&buffer[16*i], 16, 1 );
        }
    }
}


void LCDWriteTime(u8 hour,u8 min,u8 is12Hour,u8 flag)
{
    static u8 bhour=0xAf, bmin=0xAf, bis12Hour=0xAf;
    u8 i;

    if (is12Hour)
    {
        if(hour>12)
        {
            hour-=12;
        }
    }
    if(is12Hour!=bis12Hour)
    {
        for(i=0; i<12; i++)
        {
            SetLineAndPageAddress(12-i, 55);  /* 55, 24 */
            WriteBuffer(0, 66, 0);
        }
    }

    for (i=0; i<6; i++)
    {
        if (((hour/10)!=(bhour/10))||(is12Hour!=bis12Hour)||flag)
        {
            /*小时的高位*/
            SetLineAndPageAddress(12-i, 55);
            WriteBuffer((u8*)&dis0to9_30X48[hour/10][30*i], 30, true);
        }
        if( ((hour%10)!=(bhour%10))||(is12Hour!=bis12Hour)||flag)
        {
            /*小时的低位*/
            SetLineAndPageAddress(12-i, 91);
            WriteBuffer((u8*)&dis0to9_30X48[hour%10][30*i], 30, true);
        }
    }
    for (i=0; i<6; i++)
    {
        if (((min/10) != (bmin/10))||flag)
        {
            /*分钟的高位*/
            SetLineAndPageAddress(6-i, 55);
            WriteBuffer((u8*)&dis0to9_30X48[min/10][30*i], 30, true);
        }
        if (((min%10) != (bmin%10))||flag)
        {
            /*分钟的低位*/
            SetLineAndPageAddress(6-i, 91);
            WriteBuffer((u8*)&dis0to9_30X48[min%10][30*i], 30, true);
        }
    }

    bhour=hour;
    bmin=min;
    bis12Hour=is12Hour;
}



//powerlever  from 0 to 3
void LCDWritePowerLever(u8 powerlever)
{
    powerlever%=4;
    Write_Command(0x30+powerlever);

}


void FillLcd( u8 flag )
{
    u8 page_number, column_number;
    for ( page_number=0; page_number<16; page_number++ )
    {
        Write_Command( 0xB0 + page_number );
        Write_Command( 0x00 );
        Write_Command( 0x10 );
        for( column_number=0; column_number<128; column_number++ )
        {
            Write_Data( flag );
            Write_Data( flag );
        }
    }
}

#if 0
void All_Screen(void)
{
    u8 page_number,column_number;


#if 1

    for(page_number=0; page_number<8; page_number++)
    {
        Write_Command(0xb0+page_number);
        SetColumnAddress(0);
        for(column_number=0; column_number<128; column_number++)
        {

            Write_Data(0);
        }
    }
#endif






    LCDWritePowerONOff();



    LCDWritePowerLever(0);
    LCDWritePowerLever(3);
    LCDWritePowerLever(0);

    while(1);

    LCDWriteGsm(0,23);
    LCDWriteGsm(1,4);
    LCDWriteGsm(1,5);
    LCDWriteGsm(1,11);
    LCDWriteGsm(1,14);
    LCDWriteGsm(1,16);
    LCDWriteGsm(1,20);

    LCDWritePower(0,21);
    LCDWritePower(1,34);
    LCDWritePower(0,56);
    LCDWritePower(1,78);
    LCDWritePower(0,90);
    LCDWritePower(1,100);

    LCDWriteTime(12,34,1);

    LCDWriteCoin(gpscoin,GPS_COIN_LEN,GPS_POSITION,1);
    LCDWriteCoin(gpscoin,GPS_COIN_LEN,GPS_POSITION,0);
    LCDWriteCoin(gpscoin,GPS_COIN_LEN,GPS_POSITION,1);

    LCDWriteCoin(soscoin,SOS_COIN_LEN,SOS_POSITION,1);
    LCDWriteCoin(soscoin,SOS_COIN_LEN,SOS_POSITION,0);
    LCDWriteCoin(soscoin,SOS_COIN_LEN,SOS_POSITION,1);

    LCDWriteCoin(blecoin,BLE_COIN_LEN,BLE_POSITION,1);
    LCDWriteCoin(blecoin,BLE_COIN_LEN,BLE_POSITION,0);
    LCDWriteCoin(blecoin,BLE_COIN_LEN,BLE_POSITION,1);
}
#endif

#pragma optimize=none
void TaskLcd(void)
{
    static u8 stu=0,time=0,flash=0,minbefore=0;
    static u8 gpsvb=0xaf,bleb=0xaf,sosb=0xaf;
    u32  IconIndex;

#if 0
    void CleanLcd(void);
    void BacklightOnOff(u8 on);
    void LCDWriteGsm(u8 qss,u8 csq);
    void LCDWritePowerONOff(void);
    void LCDWriteBattery(u8 power);
    void LCDWriteTime(u8 hour,u8 min,u8 is12Hour);
    void LCDWritePowerLever(u8 powerlever);
    void LCDWriteCoin(const u8 *coin,u8 coinlen,u8 position,u8 enable);
#endif
    switch(stu)
    {
    case 0:/**/
        LcdInit();
        LCDWritePowerONOff();
        StuKey.keypress_on=NOT_PRESS;
        StuKey.processend=1;
        time=0;
        stu++;
        break;

    case 1:
        if ((time++>30)&&(StuKey.SystemState==SYSTEM_ON))
        {
            stu++;
            flash=0xaa;
        }
        break;

    case 2:
        if ((flash == 0xaa) || (sosb != GsmSta.sos))
        {
            FillLcd( 0 );
            flash=0xaa;
            sosb=GsmSta.sos;
        }

        if ( GsmSta.sos )
        {
            if (( time >= 10 ) || ( time == 0 ))
            {
                time = 0;
                FillLcd( 0 );
                LCDWriteSos( soscoin_f,1);
            }
            if ( time == 5 )
            {
                FillLcd( 0xFF );
                LCDWriteSos( soscoin_r,1);
            }
        }
        else
        {
            if (((GsmSta.charging == BATTERY_NOT_CHARGE) && (GsmSta.LcdStatecharge != BATTERY_NOT_CHARGE)) ||
                ((GsmSta.LcdStateBattery != GsmSta.Battery) && (time > 20)) ||
                (flash == 0xaa))
            {
                time=0;
                GsmSta.LcdStateBattery = GsmSta.Battery;
                GsmSta.LcdStatecharge  = BATTERY_NOT_CHARGE;
                LCDWriteBattery( GsmSta.Battery );
            }
            else if ((GsmSta.charging == BATTERY_CHARGE) && (time > 6))
            {
                time=0;
                GsmSta.LcdStateBattery = GsmSta.Battery;
                GsmSta.LcdStatecharge  = BATTERY_CHARGE;
                LCDWriteBattery( GsmSta.Battery );
            }

            if ((time%9==0) || (flash==0xaa) || (minbefore!=timer.min))
            {
                CoverTimeToBCD();
                if ((minbefore!=timer.min)||(flash==0xaa))
                {
                    LCDWriteTime(timer.hour, timer.min, GsmSto.Is12h,flash);
                    minbefore=timer.min;
                }
            }

            LCDWriteGsm(1, GsmSta.CSQ);

            if( (gpsvb!=strGpsData.bValidity)||(flash==0xaa))
            {
                if(strGpsData.bValidity=='A')
                    LCDWriteCoin(gpscoin,GPS_COIN_LEN,GPS_POSITION,1);
                else
                    LCDWriteCoin(gpscoin,GPS_COIN_LEN,GPS_POSITION,0);
                gpsvb=strGpsData.bValidity;
            }
            if((bleb!=GsmSta.ble)||(flash==0xaa))
            {
                if(GsmSta.ble)
                    LCDWriteCoin(blecoin,BLE_COIN_LEN,BLE_POSITION,1);
                else
                    LCDWriteCoin(blecoin,BLE_COIN_LEN,BLE_POSITION,0);
                bleb=GsmSta.ble;
            }

            IconIndex = 0;
            if ( ( GsmSto.lcdWeather[0] >= '0' ) && ( GsmSto.lcdWeather[0] <= '9' ) )
            {
                IconIndex = ( GsmSto.lcdWeather[0] - '0' ) * 10;
                if ( ( GsmSto.lcdWeather[1] >= '0' ) && ( GsmSto.lcdWeather[1] <= '9' ) )
                {
                    IconIndex += GsmSto.lcdWeather[1] - '0';
                }
            }
            DisplayWeather( IconIndex );
            DisplayTemperature( GsmSto.lcdTemperature[0], GsmSto.lcdTemperature[1] );
            DisplayDate( timer.w_month, timer.w_date );
            DisplayWeek( timer.week );

    #if 0  /* 在最下面一行显示测量的电压值 */
            u32 i = 0;

            SetLineAndPageAddress(0, 48);
            i = GsmSta.voltage;
            WriteBuffer((u8 *)dis0to9of8X8little[i/1000], 5, 1);
            SetLineAndPageAddress(0, 56);
            i = i % 1000;
            WriteBuffer((u8 *)dis0to9of8X8little[i/100], 5, 1);
            SetLineAndPageAddress(0, 64);
            i = i % 100;
            WriteBuffer((u8 *)dis0to9of8X8little[i/10], 5, 1);
            SetLineAndPageAddress(0, 72);
            WriteBuffer((u8 *)dis0to9of8X8little[i%10], 5, 1);
    #endif

            if (StuKey.SystemState==SYSTEM_OFF)
            {
                FillLcd( 0 );
                BacklightOnOff(true);
                LCDWritePowerONOff();
                stu++;
                time=0;
            }

    #if 0  /* 启动定时关屏 */
            if ( GsmSta.LCDState )
            {
                GsmSta.LCDState --;
                if ( GsmSta.LCDState == 0 )
                {
                    BacklightOnOff( false );
                }
            }
    #endif
        }

        time++;
        flash=0;
        break;

    case 3:
        if(time++>30)
        {

            BacklightOnOff(false);
            LCDWriteTime(80,80,!GsmSto.Is12h,0);
            gpsvb=sosb=bleb=0xaf;
            GsmSta.opeabuflen=1;
            LCDWriteGsm(0,-GsmSta.CSQ);
            FillLcd( 0 );
            StuKey.keypress_on=NOT_PRESS;
            StuKey.processend=1;

            LCD_RST_LOW();
            LCD_POWER_OFF();
            stu++;
        }
        break;
    case 4:
        if( StuKey.SystemState==SYSTEM_ON)
        {
            LCD_RST_HIGH();
            stu=0;
        }
        break;
    default:
        stu=0;
        break;
    }

}

void LED_Init(void)
{
  /* Configure LED pin as output */
  GPIO_PinModeSet( RLED_GPIO_PORT, RLED_GPIO_PIN, gpioModePushPull, 0 );
  GPIO_PinModeSet( GLED_GPIO_PORT, GLED_GPIO_PIN, gpioModePushPull, 0 );

  GPIO_PinOutSet( GLED_GPIO_PORT, GLED_GPIO_PIN );
  GPIO_PinOutSet( RLED_GPIO_PORT, RLED_GPIO_PIN );
}

extern u32 g_GLedFlag;
extern u8  gGsmInit;
extern u8  gGsmPowerDown;
void LED_Task( void )
{
    static u8 GLedTimes = 0;
    static u8 GLedOn = 0, GLedOff = 0;
    static u8 GLedDurable = 0;
    u8  BatFlag = 0;

    if ( GLedDurable == 0 ) {
        if ( ( GLedOn == 0 ) || ( GLedOff == 0 ) || ( READ_GLED_STATUS() ) ) {
            /* 闪灯周期开始的参数加载流程 */
            if ( GLedTimes == 0 ) {
                if ( GsmSta.charging == BATTERY_CHARGE ) {
                    g_GLedFlag &= ~GLED_BAT_STAUTS;
                    if ( GsmSta.ful ) {
                        GLedOn    = 0;
                        GLedOff   = 5;
                        GLedTimes = 0;
                    }
                    else {
                        GLedOn    = 5;
                        GLedOff   = 0;
                        GLedTimes = 0;
                    }
                }
                else if ( StuKey.SystemState == SYSTEM_ON ) {
                    if ( GsmSta.Battery < GsmSto.BatteryQuatity ) {
                        GLedOn    = 3;
                        GLedOff   = 50;
                        GLedTimes = 0;
                        g_GLedFlag &= ~GLED_BAT_STAUTS;
                    }
                    else {
                        GLedOn    = 0;
                        GLedOff   = 5;
                        GLedTimes = 0;
                    }
                }
                else {
                    GLedOn    = 0;
                    GLedOff   = 5;
                    GLedTimes = 0;
                }

                if ( g_GLedFlag ) {
                    if ( g_GLedFlag & GLED_POWEROFF_ACTION ) {
                        g_GLedFlag = 0;
                        GpsPowerOff();
                        BLE_POWER_OFF();
                        /* GSM_POWER_OFF(); */
                        gGsmPowerDown = 0xAA;

                        //PowerHoldOff();
                    }
                    else if ( g_GLedFlag & GLED_START_STAUTS ) {
                        g_GLedFlag &= ~GLED_START_STAUTS;

                        if ( READ_GSMPOWER_STATUS() == 0 ) {
                            gGsmInit = 0xAA;
                        }
                        GpsPowerOn();
                        BLE_POWER_ON();
                        GSM_POWER_ON();
                        GLedOn    = 30;
                        GLedOff   = 0;
                        GLedTimes = 1;
                    }
                    else if ( g_GLedFlag & GLED_STOP_STAUTS ) {
                        g_GLedFlag &= ~GLED_STOP_STAUTS;
                        g_GLedFlag = GLED_POWEROFF_ACTION;

                        GLedOn    = 1;
                        GLedOff   = 3;
                        GLedTimes = 3;
                    }
                    else if ( g_GLedFlag & GLED_BAT_STAUTS ) {
                        BatFlag = ( g_GLedFlag & GLED_BAT_STAUTS ) >> 12;
                        GLedOn    = 2;
                        GLedOff   = 5;
                        GLedTimes = 0;
                        do {
                            GLedTimes = GLedTimes + 1;
                            BatFlag   = BatFlag >> 1;
                        } while ( BatFlag );
                        g_GLedFlag &= ~GLED_BAT_STAUTS;
                    }
                }
            }

            if ( GLedOn ) {
                GLED_ON();
                GLedDurable = GLedOn;
            }
            else {
                GLED_OFF();
                GLedDurable = GLedOff;
            }

            if ( GLedTimes ) {
                GLedTimes --;
            }
        }
        else {
            GLED_OFF();
            #if 1
            GLedDurable = GLedOff;
            #else    /* 保留代码，特殊需求 */
            if ( GLedTimes )
                GLedDurable = GLedOff;
            else
                GLedDurable = 100;  /* 强制装载一个较长的灭灯时间，跟正常默认时长保持一致，避免特殊闪灯结束后快速进入正常闪灯 */
            #endif
        }
    }
    else {
        /* 常规闪灯期间，有定制闪灯请求，灯灭，并且剩余时长大于1s，强行进入参数加载流程 */
        if ( ( GLedTimes == 0 ) && ( g_GLedFlag ) && ( READ_GLED_STATUS() ) && ( GLedDurable > 10 ) ) {
            GLedDurable = 1;    /* 下面有减1流程 */
        }
    }

    GLedDurable --;
}
